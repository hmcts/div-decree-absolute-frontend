<h2 class="heading-medium">Modify raw session</h2>

<form id="rawSession" action="{{ postUrl | default(path if path else url) }}" method="post" class="form">
  <div id="jsoneditor" style="width: !100%; height: 500px;"></div>
  <input type="hidden" id="session" name="session" />

  <br>

  <script>

    jQuery(document).ready(() => {
      // create the editor
      var container = document.getElementById("jsoneditor");
      var options = { modes: ['code', 'tree'], mode: 'tree' };
      var editor = new JSONEditor(container, options);

      // set json
      var json = JSON.parse(`{{ sessionJson | safe }}`);
      editor.set(json);
      editor.expandAll();

      // get json
      var json = editor.get();

      jQuery('#rawSession').submit(function(e) {
        jQuery('#session').val(JSON.stringify(editor.get()));
      });
    });
  </script>

  <input type="hidden" name="_csrf" value="{{ csurfCsrfToken }}">
  <input class="button" type="submit" value="Set case data">
</form>
